# Changelog

All notable changes to this project will be documented in this file.

## [0.2.0] - 2025-09-20

### 🚀 Added
- **多线程支持**: 实现多线程 + 异步并发的双重优化架构
- **智能页面分配**: 自动将页面范围平均分配给各个线程
- **线程安全设计**: 使用 ThreadSafeDataManager 确保数据写入安全
- **新增命令行参数**: `--threads` 参数控制线程数量，`--config` 参数指定配置文件
- **config.json支持**: 新增配置文件支持，优先级：命令行参数 > 环境变量 > config.json > 默认值
- **环境变量支持**: `BUFF_THREADS` 环境变量配置
- **详细监控输出**: 实时显示每个线程的工作进度和状态

### 🚀 Performance
- **性能大幅提升**: 5个线程可实现5倍性能提升（5线程×6并发=30个同时请求）
- **资源优化**: 每个线程使用独立的HTTP客户端和事件循环

### 🔄 Changed
- 重构主函数，支持多线程架构
- 优化数据库写入机制，确保多线程环境下的安全性
- 改进错误处理，单个线程出错不影响其他线程
- 增强配置系统，支持多种配置方式的优先级覆盖

### ✨ Features
- **向下兼容**: 保留原有单线程版本作为备选
- **灵活配置**: 支持1-N个线程的灵活配置
- **智能分工**: 页面范围自动分割，支持不均匀分配
- **配置文件**: 支持JSON配置文件，便于管理复杂配置

### 📖 Documentation
- 更新 README.md 包含多线程使用说明和配置文件说明
- 新增 MULTI_THREAD_README.md 详细说明多线程功能
- 添加性能对比和配置建议
- 完整的命令行参数说明

## [0.1.0] - 2025-09-19

### Added
- 基于网站内部 API 批量抓取商品列表数据
- 支持 cookie（登录态）以获取需要登录才能查看的页面
- 异步并发抓取 + 单写入线程批量写入 MySQL
- 支持将抓取结果写入 MySQL（ON DUPLICATE KEY UPDATE 做到幂等写入）
- 环境变量配置支持
- 代理支持