# 🔍 搜索功能使用说明

## 功能概述

Buffotte v0.6.0 新增了强大的饰品搜索功能，允许用户：
- 🔍 模糊搜索饰品名称
- 📊 查看具体饰品的详细价格信息
- 🔄 实时刷新饰品数据（集成爬虫）

## 功能特性

### 🎯 智能搜索
- **模糊匹配**：输入部分饰品名称即可搜索
- **实时建议**：输入时显示搜索建议下拉框
- **精确匹配**：优先显示完全匹配的结果

### 📈 详细信息
- **价格信息**：最高收购价、最低售价、参考价格
- **市场数据**：在售数量、求购数量、成交数量
- **更新时间**：显示数据最后更新时间

### 🔄 数据刷新
- **一键刷新**：点击刷新按钮获取最新数据
- **爬虫集成**：自动调用爬虫获取实时价格
- **状态反馈**：显示刷新进度和结果

## 使用方法

### 1. 搜索饰品
1. 在页面顶部的搜索框中输入饰品名称
2. 系统会自动显示匹配的饰品列表
3. 点击选择你要查看的饰品

### 2. 查看详情
选择饰品后，页面会显示：
- 💰 最高收购价 + 求购数量
- 🏷️ 最低售价 + 在售数量  
- 📊 参考价格 + 成交数量
- 🕒 数据更新时间

### 3. 刷新数据
1. 点击"🔄 刷新数据"按钮
2. 系统会调用爬虫获取最新价格
3. 刷新完成后自动更新显示

## API 接口

### 搜索饰品
```
GET /api/search?q=AK-47
```

响应示例：
```json
{
  "success": true,
  "data": [
    {
      "id": 123456,
      "name": "AK-47 | 红线 (久经沙场)",
      "market_hash_name": "AK-47 | Redline (Field-Tested)",
      "sell_min_price": "45.50",
      "sell_reference_price": "48.00"
    }
  ]
}
```

### 获取饰品详情
```
GET /api/item/123456
GET /api/item/AK-47%20|%20红线%20(久经沙场)
```

### 刷新饰品数据
```
POST /api/refresh-item
Content-Type: application/json

{
  "id": 123456,
  "name": "AK-47 | 红线 (久经沙场)"
}
```

## 技术实现

### 前端组件
- **SearchBox.vue**：搜索输入框和下拉建议
- **ItemDetail.vue**：饰品详情展示组件
- **防抖优化**：300ms 防抖避免频繁请求

### 后端API
- **模糊搜索**：使用 LIKE 查询支持部分匹配
- **数据验证**：支持 ID 和名称两种查询方式
- **错误处理**：完善的错误反馈机制

### 爬虫集成
- **单品更新**：支持指定ID或名称更新单个饰品
- **实时获取**：直接从Buff平台获取最新价格
- **数据库写入**：自动更新数据库中的价格信息

## 注意事项

⚠️ **重要提醒**：
1. 刷新功能需要网络连接到Buff平台
2. 频繁刷新可能触发反爬虫限制
3. 建议合理使用刷新功能
4. 确保已配置正确的cookies（如需要）

## 示例用法

1. **搜索AK-47皮肤**：
   - 输入"AK-47"
   - 选择感兴趣的皮肤
   - 查看价格详情

2. **查看刀具价格**：
   - 输入"蝴蝶刀"
   - 选择具体型号
   - 点击刷新获取最新价格

3. **监控手套价格**：
   - 搜索"手套"
   - 选择目标手套
   - 定期刷新查看价格变化

---

🎮 **享受您的Buffotte体验！**